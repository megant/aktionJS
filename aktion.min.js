var $=function(a,b,c){var j,d=Node.prototype,e=NodeList.prototype,f="forEach",g="trigger",h=[][f],i=a.createElement("i");return e[f]=h,b.on=d.on=function(a,b){a=a.split(" ");for(j in a)this.addEventListener(a[j],b,!1);return this},e.on=function(a,b){return a=a.split(" "),this[f](function(c){for(j in a)c.on(a[j],b)}),this},b[g]=d[g]=function(b,c){var d=a.createEvent("HTMLEvents");return d.initEvent(b,!0,!0),d.data=c||{},d.eventName=b,d.target=this,this.dispatchEvent(d),this},e[g]=function(a){return this[f](function(b){b[g](a)}),this},c=function(b){var c=a.querySelectorAll(b||"â˜º"),d=c.length;return 1==d?c[0]:c},c.on=d.on.bind(i),c[g]=d[g].bind(i),c}(document,this);Node.prototype.delegate=function(a,b,c){var d=this.mozMatchesSelector||this.webkitMatchesSelector||this.oMatchesSelector||this.matchesSelector||function(a){var b=this,c=$(a),d=!1;return c instanceof NodeList?c.forEach(function(a){a===b&&(d=!0)}):c===b&&(d=!0),d};return this.on(b,function(b){d.call(b.target,a)&&c.call(b.target,b)}),this};var Aktion=function(a){var b=null,c=[],d={isIOS:!1,actionCheckInProgress:!1,elementNameCounter:0,scrollStatus:0},e={startX:null,startY:null,currentX:null,currentY:null},f={dataAttributePrefix:"aktion",autoActivate:!0,debugMode:!1},g={},h={type:"toggle",source_selector:null,destination_selector:null,event:"click",event_threshold:10,attribute:"class",value:null,value_type:"static",trigger_before:!1,trigger_after:!1,interval_time:100,extra_condition:function(){return!0}},i={},j=[],k={log:function(a,b){return!!g.debugMode&&void console.log(a,b)},extend:function(){var a={},b=!1,c=0,d=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],c++);for(var e=function(c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(b&&"[object Object]"===Object.prototype.toString.call(c[d])?a[d]=extend(!0,a[d],c[d]):a[d]=c[d])};c<d;c++){var f=arguments[c];e(f)}return a},getPointerEvent:function(a){return a.targetTouches?a.targetTouches[0]:a},getHeight:function(a){var b;if(a==window)b=a.innerHeight;else if(a==document)b=this.getDocumentDimension("height");else{b=a.offsetHeight;var c=getComputedStyle(a);b+=parseInt(c.marginTop)+parseInt(c.marginBottom)}return b},getDocumentDimension:function(a){var b=document;return a=a.charAt(0).toUpperCase()+a.slice(1),Math.max(b.body["scroll"+a],b.documentElement["scroll"+a],b.body["offset"+a],b.documentElement["offset"+a],b.body["client"+a],b.documentElement["client"+a])},checkIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},getDelegatorDOMElement:function(a){return"window"!=a&&$("body")},getAttr:function(a,b){var c=this.getAttrName(b);return a.getAttribute(c)},getAttrName:function(a){return"data-"+g.dataAttributePrefix+"-"+a},forEach:function(a,b,c){void 0===a.length&&(a=[a]);for(var d=0;d<a.length;d++)b.call(c,a[d],d)},getWindowScrollTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},l=function(){g=k.extend(f,a),d.isIOS=k.checkIOS(),g.autoActivate&&m()},m=function(){var a=$("["+k.getAttrName("value")+"]");return!(a.length<1)&&(n(a),void k.forEach(a,function(a,b){var c=v(a);w(c)}))},n=function(){$("["+k.getAttrName("event")+'="trans-end"]').on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){a.target.trigger("trans-end")}),$("["+k.getAttrName("event")+'="anim-end"]').on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(a){a.target.trigger("anim-end")})},o=function(a){var b=!1,c=[];a.sourceElm.on("touchstart",function(a){var c=k.getPointerEvent(a);e.startX=e.currentX=c.pageX,e.startY=e.currentY=c.pageY,b=!0,setTimeout(function(){e.startX!==e.currentX||b||e.startY!==e.currentY||(b=!1)},200)}),a.sourceElm.on("touchmove",function(b){var d=k.getPointerEvent(b);c=[],e.currentX=d.pageX,e.currentY=d.pageY,e.currentX+a.event_threshold<e.startX?c.push("swipeleft"):e.currentX-a.event_threshold>e.startX&&c.push("swiperight"),e.currentY+a.event_threshold<e.startY?c.push("swipeup"):e.currentY-a.event_threshold>e.startY&&c.push("swipedown")}),a.sourceElm.on("touchend touchcancel",function(d){if(b&&c.length){var e=c.indexOf(a.event);e>-1&&a.extra_condition()&&a.sourceElm.trigger(c[e])}b=!1,c=[]})},p=function(a,b){var e,f,g=c[a];g.sourceElm==window&&(g.scrollContainer.scrollTop=k.getWindowScrollTop()),f=null!==g.lastY&&g.lastY<g.scrollContainer.scrollTop?1:g.lastY>g.scrollContainer.scrollTop?-1:null;var h=d.scrollStatus,i=h>1&&null===f;if(i&&(null===g.lastDirection||"scroll-reached-bottom"==g.event||"scroll-reached-top"==g.event))return"scrollstart"==b&&g.scrollContainer.trigger("scrollend"),!1;if(g.scrollContainer.scrollTop<0||g.scrollContainer.scrollTop+k.getHeight(g.scrollContainer)>k.getDocumentDimension("height"))return!1;switch(g.event){case"scroll-start":e=1==h&&g.scrollContainer.scrollTop>0;break;case"scroll-stop":e=h>1&&null===f;break;case"scroll":e=h>1&&null!==f;break;case"scroll-up":e=h>1&&f==-1;break;case"scroll-down":e=h>1&&1==f;break;case"scroll-dir-change":e=h>1&&(g.lastDirection==-1&&1==f||1==g.lastDirection&&f==-1);break;case"scroll-dir-change-up":e=h>1&&1==g.lastDirection&&f==-1;break;case"scroll-dir-change-down":e=h>1&&g.lastDirection==-1&&1==f;break;case"scroll-reached-top":e=h>1&&1!=g.lastDirection&&0==g.scrollContainer.scrollTop;break;case"scroll-reached-bottom":e=h>1&&g.lastDirection!=-1&&g.scrollContainer.scrollTop+k.getHeight(g.scrollContainer)==k.getHeight(g.scrollContent)}return c[a].lastDirection=f,c[a].lastY=g.scrollContainer.scrollTop,1==h&&null!==f&&(d.scrollStatus=2),g.extra_condition()&&e},q=function(a,b){i[a.name]={_this:b,element:a},j.push(a.name),window.setTimeout(function(){!d.actionCheckInProgress&&j.length>0&&(d.actionCheckInProgress=!0,s())},0)},r=function(){i={},j=[],d.actionCheckInProgress=!1},s=function(){var a,b;for(var c in j)a=j[c],b=i[a].element,b.trigger_before&&j.indexOf(b.trigger_before)>-1&&j.indexOf(a)>j.indexOf(b.trigger_before)?(delete j[c],j.splice(j.indexOf(b.trigger_before),0,a)):b.trigger_after&&j.indexOf(b.trigger_after)>-1&&j.indexOf(a)<j.indexOf(b.trigger_after)&&(delete j[c],j.splice(j.indexOf(b.trigger_after)+1,0,a));t()},t=function(){var a,b,c=[];for(var d in j)a=i[j[d]],b=u(a.element,a._this),!1!==b&&c.push(b);r(),c.length&&k.forEach(c,function(a,b){a()})},u=function(a,b){k.log(a.name+" action is running.",a),"object"!=typeof a&&(a=c[a]);var e,f,g,h,i,j,l;if("attribute"==a.value_type?value_data=b.getAttribute(a.value):value_data=a.value,"trigger-event"!=a.type){f=value_data.split(",");var m=["checked","selected","disabled"];l=null===a.destination_selector&&a.destElm.length>1?b:a.destElm;for(var n in f)g=f[n].trim(),k.forEach(l,function(b,c){if(e=b.getAttribute(a.attribute),null!==e?(h=e.split(" "),i=h.indexOf(g)):(h=null,i=-1),"set"!=a.type)if("remove"!=a.type&&i<0)j=(null!==e&&e.length>0?e+" ":"")+g;else{if(!("add"!=a.type&&i>-1))return!1;if(m.indexOf(a.attribute)>-1)return void(b[a.attribute]=!1);h.splice(i,1),j=h.join(" ")}else j=g;b.setAttribute(a.attribute,j)});return!1}return function(){$(null===a.destination_selector?a.source_selector:a.destination_selector).trigger(value_data)}},v=function(a){var b,c;if(k.getAttr(a,"name"))var e=k.getAttr(a,"name");else{var e="action"+d.elementNameCounter;d.elementNameCounter++}var f={name:e};for(var g in h){if(b=k.getAttr(a,g.replace("_","-")))switch(typeof h[g]){case"number":c=parseInt(b);break;case"function":c=window[b];break;default:c=b}else c=h[g];f[g]=c}switch(f.source_selector){case"window":f.sourceElm=window;break;case"document":f.sourceElm=document;break;case null:f.sourceElm=a;break;default:f.sourceElm=$(f.source_selector)}return d.isIOS&&"window"!=f.source_selector&&"document"!=f.source_selector&&"click"==f.event&&(f.sourceElm.style.cursor="pointer"),f.destElm=null!==f.destination_selector?$(f.destination_selector):f.sourceElm,f},w=function(a){a.event.indexOf("scroll")>-1?x(a):a.event.indexOf("swipe")>-1?y(a):z(a)},x=function(a){a.lastY=null,a.direction=null;var e="window"==a.source_selector||"document"==a.source_selector?[window]:a.sourceElm;k.forEach(e,function(e,f){void 0!==e.parentNode?a.scrollContainer=e.parentNode:a.scrollContainer=e,a.scrollContent="window"==a.source_selector||"document"==a.source_selector?document:e,a.scrollContainer.on("touchstart mousedown scrollstart",function(e){null===b&&(d.scrollStatus=1,b=setInterval(function(){for(var a in c)p(a,e.type)&&q(c[a],c[a].sourceElm)},a.interval_time))}),a.scrollContainer.on("touchend touchcancel mouseup scrollend",function(c){null!==b&&(clearInterval(b),b=null,a.lastY=null,d.scrollStatus=0)}),a.scrollContainer.on("scroll",function(c){null===b&&a.scrollContainer.trigger("scrollstart")}),c.push(a)})},y=function(a){o(a),null!==a.source_selector&&(delegator=k.getDelegatorDOMElement(a.source_selector))?delegator.delegate(a.source_selector,a.event,function(b){q(a,b.target)}):a.sourceElm.on(a.event,function(b){q(a,b.target)})},z=function(a){null!==a.source_selector&&(delegator=k.getDelegatorDOMElement(a.source_selector))?delegator.delegate(a.source_selector,a.event,function(b){a.extra_condition()&&q(a,b.target)}):a.sourceElm.on(a.event,function(b){a.extra_condition()&&q(a,b.target)})},A={activate:function(){return m()}};return l(),A};